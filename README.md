# Open Rails Partial Chrome Extension

![build](https://github.com/dewski/open-rails-partial-chrome-extension/workflows/build/badge.svg)

Open any Rails partial, action, [ViewComponent](https://viewcomponent.org/), or layout directly from the browser by right clicking on any element on the page in your editor of choice. This extension will list the hierarchy of partials, actions, [ViewComponents](https://viewcomponent.org/), and layouts that were rendered for the element you inspected starting with the file that contains the element you clicked on.

Install the [Chrome Extension](https://chrome.google.com/webstore/detail/open-rails-partial/njkledhjbnnemkphdnodpiodmnhkgdlc).

![Open Rails Partial Chrome Extension Demo](./images/demo.gif)

## Usage

### Installing the VS Code extension

Currently the only editor supported is VS Code using the [`dewski.open-rails-partial`](https://marketplace.visualstudio.com/items?itemName=dewski.open-rails-partial) VS Code extension. The VS Code extension is required because the filenames in the HTML comments generated by Rails are relative to the root of your project.

```erb
<!-- BEGIN app/users/index.html.erb -->
  <h1>Users</h1>
<!-- END app/users/index.html.erb -->
```

VS Code requires the fullpath to open a file in the editor using the URI handler (`vscode://file/path/to/file`) provided by VS Code. The VS Code extension will open the relative path in your most recent window. If you attempt to open a file that doesn't exist in the current workspace, make sure you switch to the workspace window containing your Rails project.

### Enabling `annotate_rendered_view_with_filenames`

For the Open Rails Partial browser extension to work, you must enable the `annotate_rendered_view_with_filenames` option in your Rails application. This will add HTML comments to the rendered view with the file name of each partial, action, and layout for the given page.

```ruby
# config/environments/development.rb

Rails.application.configure do
  # Annotate rendered view with file names.
  config.action_view.annotate_rendered_view_with_filenames = true
end
```

It's recommended to only enable this option in development or staging environments.

## Browser Support

- ✅ [Chrome](https://chrome.google.com/webstore/detail/open-rails-partial/njkledhjbnnemkphdnodpiodmnhkgdlc)
- ❌ Safari - Coming soon

## Extension Development

To develop the extension, you'll need to install the dependencies and build the extension.

### Setup

```
npm install
```

### Build

```
npm run build
```

### Build in watch mode

#### terminal

```
npm run watch
```

#### Visual Studio Code

Run watch mode.

type `Ctrl + Shift + B`

### Load extension to chrome

Load `dist` directory

### Test
`npx jest` or `npm run test`
